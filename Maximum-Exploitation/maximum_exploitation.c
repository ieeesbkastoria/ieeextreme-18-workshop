//
//   CSAcademy Problem - Maximum Exploitation
//   From: IEEEXtreme 15.0
//   Solved By: Dimitrios and Petros Papakonstantinou
//   Submission Score: 100/100 (113ms - 4392KB)
//

#include <stdio.h>

#define MAX_SIZE 1001

int inline max(int a, int b) { return (a > b) ? a : b; }

int main() {
  int row, col, x, y;
  int rowMax[MAX_SIZE] = {0};
  int colMax[MAX_SIZE] = {0};
  int sum[MAX_SIZE][MAX_SIZE] = {0};

  // Read row and col
  if (scanf("%d %d", &row, &col) != 2) {
    printf("Invalid row and col input\n");
    return 1;
  }

  // Read x and y
  if (scanf("%d %d", &x, &y) != 2) {
    printf("Invalid x and y input\n");
    return 1;
  }

  if (row == 0 || col == 0 || x == 0 || y == 0 || row >= MAX_SIZE ||
      col >= MAX_SIZE) {
    printf("Invalid dimensions\n");
    return 1;
  }

  for (int r = 1; r <= row; r++) {
    rowMax[r] = max(rowMax[r], rowMax[r - 1]);

    for (int c = 1; c <= col; c++) {
      int value;
      if (scanf("%d", &value) != 1) {
        printf("Invalid input value\n");
        return 1;
      }

      colMax[c] = max(colMax[c], colMax[c - 1]);
      sum[r][c] = value - sum[r - 1][c - 1] + sum[r][c - 1] + sum[r - 1][c];

      if (r >= x && c >= y) {
        int xySum =
            sum[r][c] - sum[r - x][c] - sum[r][c - y] + sum[r - x][c - y];
        rowMax[r] = max(rowMax[r], xySum);
        colMax[c] = max(colMax[c], xySum);
      }
      if (r >= y && c >= x) {
        int yxSum =
            sum[r][c] - sum[r - y][c] - sum[r][c - x] + sum[r - y][c - x];
        rowMax[r] = max(rowMax[r], yxSum);
        colMax[c] = max(colMax[c], yxSum);
      }
    }
  }

  int ans = 0;
  for (int r = 1; r <= row; r++) {
    for (int c = 1; c <= col; c++) {
      if (r >= x && c >= y) {
        int xySum =
            sum[r][c] - sum[r - x][c] - sum[r][c - y] + sum[r - x][c - y];
        ans = max(ans, xySum + max(rowMax[r - x], colMax[c - y]));
      }
      if (r >= y && c >= x) {
        int yxSum =
            sum[r][c] - sum[r - y][c] - sum[r][c - x] + sum[r - y][c - x];
        ans = max(ans, yxSum + max(rowMax[r - y], colMax[c - x]));
      }
    }
  }

  printf("%d\n", ans);
  return 0;
}
